<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>AudioLDM2 Fine-Tuning</title>

    <!--Get filesheet from webapp/static/css/style.css-->
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style.css') }}">
</head>
<body>
    {% block content %}
    <div class="container">
        {% for message in get_flashed_messages() %}
        <div class="alert alert-light">
            <button type="button" class="close" data-dismiss="alert" onclick="this.parentElement.style.display='none'">&times;</button>
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endblock %}
    <h1>AudioLDM2 Fine-Tuning and Inference Pipeline</h1>
    <!--Form to accept .zip file uploads and send them to the /archiveUpload url-->
    <!--For security, should possibly add an authorized key pair to this form-->
    <div class="formContainer">
        <h3>Upload Dataset Zip</h3>
        <form action="/archiveUpload" method="POST" enctype="multipart/form-data">
            <input type="file" name="file" accept=".zip" class="fileUpload" />
            <input type="submit"/>
        </form>
    </div>

    <div class="formContainer">
        <h3>Set Parameters</h3>
        <form action="/setParameter" method="POST">
            <label for="save_checkpoint_every_n_steps">Save Checkpoint Every N Steps:</label>
            <input type="number" name="save_checkpoint_every_n_steps">
            <input type="submit">
        </form>
    </div>

    <div class="formContainer">
        <h3>Start Fine-Tuning</h3>
        <form action="/startFineTuning" method="POST">
            <input type="submit">
        </form>
    </div>

    <div class="formContainer">
        <h3>Generate Sound</h3>
        <form action="/inferSingle" method="POST">
            <label for="prompt">Prompt:</label>
            <input type="text" name="prompt">
            <input type="submit">
        </form>
    </div>

    <div class="formContainer">
        <h3>Download Latest Checkpoint</h3>
        <button onclick="window.location.href='/downloadCheckpoint/latest'">Download</button>
    </div>

    <div class="formContainer">
        <h3>Reboot API</h3>
        <button onclick="window.location.href='/restartAPI'">Restart</button>
    </div>
</body>
</html>